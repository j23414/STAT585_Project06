Project 6
========================================================
Helmich        Sam shelmich,  Zhou        Sen  senzhou, Chang   Jennifer jenchang

Summary of Project

Code for Sam Helmich
```{r}
library(RSQLite)
library(dplyr)

# This part runs
my_db <- src_sqlite("my_db.sqlite3", create = T)
nov <- read.csv("november.csv")
dec <- read.csv("december.csv")
data <- rbind(nov, dec)
hflights_sqlite <- copy_to(my_db, data, temporary = FALSE)
rm(nov, dec, data)

tbl_vars(hflights_sqlite)

# Ignore below here

library(hflights)
hflights_sqlite <- copy_to(my_db, hflights, temporary = FALSE, indexes = list(
  c("Year", "Month", "DayofMonth"), "UniqueCarrier", "TailNum"))













# con <- dbConnect(dbDriver("SQLite"), dbname="flights")

flights_db <- src_sqlite("flights", create = T)

test <- copy_to(flights_db, read.csv("november.csv"), temporary = FALSE)



dbWriteTable(con,"flights", "november.csv")
dbWriteTable(con, "flights", "december.csv", append = T)

dbDisconnect(con)

library(dplyr)

```


Code for Sen Zhou
```{r fig.width=7, fig.height=6}

mydata<-read.csv('/Users/senzhou/Documents/stat/stat_06/flight11.csv') 
mydf<-as.data.frame(mydata) ## data as dataframe


my_db <- src_sqlite("my_db.sqlite3", create = T)
flights_sql <- copy_to(my_db, mydf, temporary = FALSE)


```

Code for Jennifer Chang
```{r fig.width=7, fig.height=6}
data_loc<-"/Users/jenchang/Desktop/STAT585/Projects/Proj6/"
install.packages('dplyr')
install.packages('RSQLite')
library(dplyr)
library(RSQLite)
my_db <- dbConnect(dbDriver("SQLite"), dbname="flights")
dbListTables(my_db)

nov <- read.csv("/Users/jenchang/Desktop/STAT585/Projects/Proj6/data/november2013.csv")
dec <- read.csv("/Users/jenchang/Desktop/STAT585/Projects/Proj6/dec2013.csv")

a<-select(nov, YEAR, QUARTER, MONTH)

copy_to(my_db, a, temporary=FALSE)

# create table
dbGetQuery(co, "CREATE TABLE IF NOT EXISTS nd_flights (
  obs INT PRIMARY KEY NOT NULL,
  totbill DOUBLE,
  tip DOUBLE,
  sex CHAR(1),
  smoker CHAR(3),
  day CHAR(3),
  time CHAR(5),
  size INT
  )")


# open sqlite connection
my_db <- src_sqlite(“mydb.sqlite3”, create=T)

# load your data into database & setting indexes
yourdata_sqlite <- copy_to(my_db, yourdata, temporary=FALSE, indexes = list( c(“col1”, “col2”), col3))
yourdata_sqlite_df <- tbl(my_db, sql(“SELECT * from yourdata”))  # do we need this?

# ===  Basic Actions (VERBS) === looks the same as above!!!! <3
filter( yourdata_sqlite_df, col1==”value1”, col2==”value2”)  # filter data by column values
arrange( yourdata_sqlite_df, col2, col4)                                   # arrange data rows by column values
select( yourdata_sqlite_df, col2,col4)                                       # select certain columns of data 
mutate( yourdata_sqlite_df, diff = col2 - col4, percentage = col2 / col4)  # mutate, adding columns
summarize( yourdata_sqlite_df, avg = mean(col2, na.rm=TRUE)   # summarize a column of values

# get tbl_df of results using collect (sql statements not executed on database until R needs to print it out)
out <- select( yourdata_sqlite_df, col2,col4)
your_final_data_df <-collect(out)

# close sqlite connection
dbDisconnect(my_db)

```

